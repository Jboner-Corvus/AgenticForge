{"version":3,"file":"errorUtils.js","sourceRoot":"","sources":["errorUtils.ts"],"names":[],"mappings":"AAEA,MAAe,YAAa,SAAQ,KAAK;IACvC,YAAmB,OAAgB;QACjC,KAAK,CAAC,OAAO,CAAC,CAAC;QACf,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC;IAC9B,CAAC;CACF;AAED,MAAM,OAAO,QAAS,SAAQ,YAAY;IAG/B;IAFT,YACE,OAAe,EACR,OAAa;QAEpB,KAAK,CAAC,OAAO,CAAC,CAAC;QAFR,YAAO,GAAP,OAAO,CAAM;IAGtB,CAAC;CACF;AAED,MAAM,OAAO,YAAa,SAAQ,QAAQ;CAAG;AAE7C,MAAM,CAAC,MAAM,WAAW,GAAG,CACzB,GAAU,EACV,GAAY,EACZ,GAAa,EACb,IAAkB,EAClB,EAAE;IACF,wCAAwC;IACxC,OAAO,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;IACnB,IAAI,GAAG,CAAC,WAAW,EAAE,CAAC;QACpB,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC;IACnB,CAAC;IACD,MAAM,UAAU,GAAG,GAAG,YAAY,QAAQ,IAAI,GAAG,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC;IACrG,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,EAAE,OAAO,EAAE,GAAG,CAAC,OAAO,IAAI,+BAA+B,EAAE,CAAC,CAAC;AAC3F,CAAC,CAAC;AAQF,MAAM,CAAC,MAAM,aAAa,GAAG,CAAC,GAAQ,EAAgB,EAAE;IACtD,IAAI,GAAG,YAAY,KAAK,EAAE,CAAC;QACzB,OAAO;YACL,OAAO,EAAE,GAAG,CAAC,OAAO,IAAI,eAAe;YACvC,IAAI,EAAE,GAAG,CAAC,IAAI,IAAI,OAAO;YACzB,KAAK,EAAE,GAAG,CAAC,KAAK;SACjB,CAAC;IACJ,CAAC;IACD,OAAO;QACL,OAAO,EAAE,MAAM,CAAC,GAAG,CAAC;QACpB,IAAI,EAAE,UAAU;KACjB,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,OAAO,oBAAqB,SAAQ,YAAY;IAC7C,MAAM,CAAW;IAExB,YAAmB,OAAe,EAAE,MAAgB;QAClD,KAAK,CAAC,OAAO,CAAC,CAAC;QACf,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC;QAC5B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;IACvB,CAAC;CACF;AAED,MAAM,OAAO,gBAAiB,SAAQ,QAAQ;IAGnC;IAFT,YACE,OAAe,EACR,OAAa;QAEpB,KAAK,CAAC,OAAO,CAAC,CAAC;QAFR,YAAO,GAAP,OAAO,CAAM;IAGtB,CAAC;CACF;AAED;;GAEG;AACH,MAAM,OAAO,SAAU,SAAQ,oBAAoB;CAAG","sourcesContent":["import { NextFunction, Request, Response } from 'express';\n\nabstract class FastMCPError extends Error {\n  public constructor(message?: string) {\n    super(message);\n    this.name = new.target.name;\n  }\n}\n\nexport class AppError extends FastMCPError {\n  public constructor(\n    message: string,\n    public details?: any,\n  ) {\n    super(message);\n  }\n}\n\nexport class WebhookError extends AppError {}\n\nexport const handleError = (\n  err: Error,\n  req: Request,\n  res: Response,\n  next: NextFunction,\n) => {\n  // TODO: Implement proper error handling\n  console.error(err);\n  if (res.headersSent) {\n    return next(err);\n  }\n  const statusCode = err instanceof AppError && err.details?.statusCode ? err.details.statusCode : 500;\n  res.status(statusCode).json({ message: err.message || 'An unexpected error occurred.' });\n};\n\nexport interface ErrorDetails {\n  message: string;\n  name: string;\n  stack?: string;\n}\n\nexport const getErrDetails = (err: any): ErrorDetails => {\n  if (err instanceof Error) {\n    return {\n      message: err.message ?? 'Unknown error',\n      name: err.name ?? 'Error',\n      stack: err.stack,\n    };\n  }\n  return {\n    message: String(err),\n    name: 'NonError',\n  };\n};\n\nexport class UnexpectedStateError extends FastMCPError {\n  public extras?: unknown;\n\n  public constructor(message: string, extras?: unknown) {\n    super(message);\n    this.name = new.target.name;\n    this.extras = extras;\n  }\n}\n\nexport class EnqueueTaskError extends AppError {\n  public constructor(\n    message: string,\n    public details?: any,\n  ) {\n    super(message);\n  }\n}\n\n/**\n * An error that is meant to be surfaced to the user.\n */\nexport class UserError extends UnexpectedStateError {}\n"]}